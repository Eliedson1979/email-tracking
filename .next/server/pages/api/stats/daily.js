"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/stats/daily";
exports.ids = ["pages/api/stats/daily"];
exports.modules = {

/***/ "(api-node)/./lib/auth.js":
/*!*********************!*\
  !*** ./lib/auth.js ***!
  \*********************/
/***/ ((module) => {

eval("\nconst allowed = (process.env.API_KEYS || '').split(',').map((s)=>s.trim()).filter(Boolean);\nfunction requireApiKey(req, res) {\n    const key = req.headers['x-api-key'];\n    if (!key || !allowed.includes(key)) {\n        res.status(401).json({\n            error: 'Unauthorized'\n        });\n        return false;\n    }\n    return true;\n}\nmodule.exports = {\n    requireApiKey\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9hdXRoLmpzIiwibWFwcGluZ3MiOiI7QUFBQSxNQUFNQSxVQUFVLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0MsUUFBUSxJQUFJLEVBQUMsRUFBR0MsS0FBSyxDQUFDLEtBQUtDLEdBQUcsQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsSUFBSSxJQUFJQyxNQUFNLENBQUNDO0FBQ2xGLFNBQVNDLGNBQWNDLEdBQUcsRUFBRUMsR0FBRztJQUM3QixNQUFNQyxNQUFNRixJQUFJRyxPQUFPLENBQUMsWUFBWTtJQUNwQyxJQUFJLENBQUNELE9BQU8sQ0FBQ2IsUUFBUWUsUUFBUSxDQUFDRixNQUFNO1FBQ2xDRCxJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBZTtRQUM3QyxPQUFPO0lBQ1Q7SUFDQSxPQUFPO0FBQ1Q7QUFDQUMsT0FBT0MsT0FBTyxHQUFHO0lBQUVWO0FBQWMiLCJzb3VyY2VzIjpbIi9ob21lL2VsaWVkc29uL1Byb2pldG9zL2VtYWlsLXRyYWNraW5nLW5leHRqcy9saWIvYXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhbGxvd2VkID0gKHByb2Nlc3MuZW52LkFQSV9LRVlTIHx8ICcnKS5zcGxpdCgnLCcpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XG5mdW5jdGlvbiByZXF1aXJlQXBpS2V5KHJlcSwgcmVzKSB7XG4gIGNvbnN0IGtleSA9IHJlcS5oZWFkZXJzWyd4LWFwaS1rZXknXTtcbiAgaWYgKCFrZXkgfHwgIWFsbG93ZWQuaW5jbHVkZXMoa2V5KSkge1xuICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbm1vZHVsZS5leHBvcnRzID0geyByZXF1aXJlQXBpS2V5IH07Il0sIm5hbWVzIjpbImFsbG93ZWQiLCJwcm9jZXNzIiwiZW52IiwiQVBJX0tFWVMiLCJzcGxpdCIsIm1hcCIsInMiLCJ0cmltIiwiZmlsdGVyIiwiQm9vbGVhbiIsInJlcXVpcmVBcGlLZXkiLCJyZXEiLCJyZXMiLCJrZXkiLCJoZWFkZXJzIiwiaW5jbHVkZXMiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./lib/auth.js\n");

/***/ }),

/***/ "(api-node)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { Pool } = __webpack_require__(/*! pg */ \"pg\");\nconst dotenv = __webpack_require__(/*! dotenv */ \"dotenv\");\ndotenv.config();\nconst pool = new Pool({\n    connectionString: process.env.DATABASE_URL\n});\nmodule.exports = {\n    pool\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9kYi5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTSxFQUFFQSxJQUFJLEVBQUUsR0FBR0MsbUJBQU9BLENBQUMsY0FBSTtBQUM3QixNQUFNQyxTQUFTRCxtQkFBT0EsQ0FBQyxzQkFBUTtBQUMvQkMsT0FBT0MsTUFBTTtBQUNiLE1BQU1DLE9BQU8sSUFBSUosS0FBSztJQUFFSyxrQkFBa0JDLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWTtBQUFDO0FBQ25FQyxPQUFPQyxPQUFPLEdBQUc7SUFBRU47QUFBSyIsInNvdXJjZXMiOlsiL2hvbWUvZWxpZWRzb24vUHJvamV0b3MvZW1haWwtdHJhY2tpbmctbmV4dGpzL2xpYi9kYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IFBvb2wgfSA9IHJlcXVpcmUoJ3BnJyk7XG5jb25zdCBkb3RlbnYgPSByZXF1aXJlKCdkb3RlbnYnKTtcbmRvdGVudi5jb25maWcoKTtcbmNvbnN0IHBvb2wgPSBuZXcgUG9vbCh7IGNvbm5lY3Rpb25TdHJpbmc6IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCB9KTtcbm1vZHVsZS5leHBvcnRzID0geyBwb29sIH07Il0sIm5hbWVzIjpbIlBvb2wiLCJyZXF1aXJlIiwiZG90ZW52IiwiY29uZmlnIiwicG9vbCIsImNvbm5lY3Rpb25TdHJpbmciLCJwcm9jZXNzIiwiZW52IiwiREFUQUJBU0VfVVJMIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/db.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstats%2Fdaily&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fstats%2Fdaily.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstats%2Fdaily&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fstats%2Fdaily.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/./node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_stats_daily_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pages/api/stats/daily.js */ \"(api-node)/./pages/api/stats/daily.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n// Import the userland code.\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_stats_daily_js__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_stats_daily_js__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/stats/daily\",\n        pathname: \"/api/stats/daily\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_stats_daily_js__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    let srcPage = \"/api/stats/daily\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: [],\n                multiZoneDraftMode: Boolean(false),\n                trustHostHeader: false,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/stats/daily\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGc3RhdHMlMkZkYWlseSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGc3RhdHMlMkZkYWlseS5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDQztBQUN1QztBQUNyQztBQUMxRDtBQUN1RDtBQUNpQjtBQUNGO0FBQ3RFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxzREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsc0RBQVE7QUFDcEM7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFBdUM7QUFDL0QsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQXFCLEVBQUUsRUFFMUI7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0RBQXdEO0FBQ3BFO0FBQ0E7QUFDQSx1QkFBdUIsNEVBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsNkNBQTZDLEVBQTZDO0FBQzFGLDRDQUE0QyxLQUF3QztBQUNwRixpQ0FBaUMsS0FBb0M7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLGdGQUFjO0FBQy9FLCtEQUErRCx5Q0FBeUM7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsUUFBUSxFQUFFLE1BQU07QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxrQkFBa0I7QUFDbEIsdUNBQXVDLFFBQVEsRUFBRSxRQUFRO0FBQ3pEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscUVBQVM7QUFDakIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlbmRFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwaS11dGlsc1wiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvc3RhdHMvZGFpbHkuanNcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3RhdHMvZGFpbHlcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdGF0cy9kYWlseVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kLFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJ1xufSk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi9hcGkvc3RhdHMvZGFpbHlcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfVxuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2VcbiAgICB9KTtcbiAgICBpZiAoIXByZXBhcmVSZXN1bHQpIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IHF1ZXJ5LCBwYXJhbXMsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0IH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgICAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgICAgICBjb25zdCBvblJlcXVlc3RFcnJvciA9IHJvdXRlTW9kdWxlLmluc3RydW1lbnRhdGlvbk9uUmVxdWVzdEVycm9yLmJpbmQocm91dGVNb2R1bGUpO1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+cm91dGVNb2R1bGUucmVuZGVyKHJlcSwgcmVzLCB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucXVlcnksXG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtc1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRSZXZhbGlkYXRlSGVhZGVyS2V5czogcHJvY2Vzcy5lbnYuX19ORVhUX0FMTE9XRURfUkVWQUxJREFURV9IRUFERVJTLFxuICAgICAgICAgICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZTogQm9vbGVhbihwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFKSxcbiAgICAgICAgICAgICAgICB0cnVzdEhvc3RIZWFkZXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9UUlVTVF9IT1NUX0hFQURFUixcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBnZXQgdGhpcyBmcm9tIGZyb20gcnVudGltZSBlbnYgc28gbWFuaWZlc3RcbiAgICAgICAgICAgICAgICAvLyBkb2Vzbid0IG5lZWQgdG8gbG9hZFxuICAgICAgICAgICAgICAgIHByZXZpZXdQcm9wczogcHJlcmVuZGVyTWFuaWZlc3QucHJldmlldyxcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGVFcnJvcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGV2OiByb3V0ZU1vZHVsZS5pc0RldixcbiAgICAgICAgICAgICAgICBwYWdlOiBcIi9hcGkvc3RhdHMvZGFpbHlcIixcbiAgICAgICAgICAgICAgICBpbnRlcm5hbFJldmFsaWRhdGU6IHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQucmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoLi4uYXJncyk9Pm9uUmVxdWVzdEVycm9yKHJlcSwgLi4uYXJncylcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGludm9rZVJvdXRlTW9kdWxlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gd2UgcmUtdGhyb3cgaW4gZGV2IHRvIHNob3cgdGhlIGVycm9yIG92ZXJsYXlcbiAgICAgICAgaWYgKHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBpcyB0ZWNobmljYWxseSBhbiBpbnZhcmlhbnQgYXMgZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgLy8gc2hvdWxkIGJlIGRvbmUgaW5zaWRlIG9mIGFwaS1yZXNvbHZlciBvbkVycm9yXG4gICAgICAgIHNlbmRFcnJvcihyZXMsIDUwMCwgJ0ludGVybmFsIFNlcnZlciBFcnJvcicpO1xuICAgIH0gZmluYWxseXtcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWxsb3cgYW55IHdhaXRVbnRpbCB3b3JrIGluIHBhZ2VzIEFQSSByb3V0ZXMgY3VycmVudGx5XG4gICAgICAgIC8vIHNvIGlmIGNhbGxiYWNrIGlzIHByZXNlbnQgcmV0dXJuIHdpdGggcmVzb2x2ZWQgcHJvbWlzZSBzaW5jZSBub1xuICAgICAgICAvLyBwZW5kaW5nIHdvcmtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstats%2Fdaily&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fstats%2Fdaily.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/stats/daily.js":
/*!**********************************!*\
  !*** ./pages/api/stats/daily.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n// const { pool } = require('../../../lib/db');\n// const { requireApiKey } = require('../../../lib/auth');\n// export default async function handler(req, res) {\n//   if (req.method !== 'GET') return res.status(405).end();\n//   if (!requireApiKey(req, res)) return;\n//   const sql = `\n//     SELECT date_trunc('day', occurred_at)::date AS day, site, type, count(*)::int as count\n//     FROM events\n//     GROUP BY day, site, type\n//     ORDER BY day DESC, site\n//   `;\n//   try {\n//     const { rows } = await pool.query(sql);\n//     const out = {};\n//     for (const r of rows) {\n//       const d = r.day.toISOString().slice(0,10);\n//       out[d] = out[d] || {};\n//       out[d][r.site] = out[d][r.site] || {};\n//       out[d][r.site][r.type] = r.count;\n//     }\n//     res.json(out);\n//   } catch (err) {\n//     console.error(err);\n//     res.status(500).json({ error: 'db error' });\n//   }\n// }\nconst { pool } = __webpack_require__(/*! ../../../lib/db */ \"(api-node)/./lib/db.js\");\nconst { requireApiKey } = __webpack_require__(/*! ../../../lib/auth */ \"(api-node)/./lib/auth.js\");\nasync function handler(req, res) {\n    if (req.method !== 'GET') return res.status(405).end();\n    if (!requireApiKey(req, res)) return;\n    const { site, type, email, campaign_id, group_by } = req.query;\n    // filtros dinâmicos\n    const filters = [];\n    const params = [];\n    let idx = 1;\n    if (site) {\n        filters.push(`site = $${idx++}`);\n        params.push(site);\n    }\n    if (type) {\n        filters.push(`type = $${idx++}`);\n        params.push(type);\n    }\n    if (email) {\n        filters.push(`email = $${idx++}`);\n        params.push(email);\n    }\n    if (campaign_id) {\n        filters.push(`metadata->>'campaign_id' = $${idx++}`);\n        params.push(campaign_id);\n    }\n    // agrupamento dinâmico\n    let extraGroup = '';\n    let extraSelect = '';\n    if (group_by === 'email') {\n        extraSelect = ', email';\n        extraGroup = ', email';\n    } else if (group_by === 'campaign_id') {\n        extraSelect = `, metadata->>'campaign_id' as campaign_id`;\n        extraGroup = `, metadata->>'campaign_id'`;\n    }\n    const where = filters.length ? `WHERE ${filters.join(' AND ')}` : '';\n    const sql = `\n    SELECT \n      date_trunc('day', occurred_at)::date AS day,\n      site,\n      type\n      ${extraSelect},\n      count(*)::int as count\n    FROM events\n    ${where}\n    GROUP BY day, site, type ${extraGroup}\n    ORDER BY day DESC, site\n  `;\n    try {\n        const { rows } = await pool.query(sql, params);\n        // Estrutura de saída\n        const out = {};\n        for (const r of rows){\n            const d = r.day.toISOString().slice(0, 10);\n            out[d] = out[d] || {};\n            out[d][r.site] = out[d][r.site] || {};\n            if (group_by === 'email') {\n                out[d][r.site][r.email] = out[d][r.site][r.email] || {};\n                out[d][r.site][r.email][r.type] = r.count;\n            } else if (group_by === 'campaign_id') {\n                const cid = r.campaign_id || 'unknown';\n                out[d][r.site][cid] = out[d][r.site][cid] || {};\n                out[d][r.site][cid][r.type] = r.count;\n            } else {\n                out[d][r.site][r.type] = r.count;\n            }\n        }\n        res.json(out);\n    } catch (err) {\n        console.error(err);\n        res.status(500).json({\n            error: 'db error'\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cm9qZXRvcy9lbWFpbC10cmFja2luZy1uZXh0anMvcGFnZXMvYXBpL3N0YXRzL2RhaWx5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbnN0IHsgcG9vbCB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vbGliL2RiJyk7XG4vLyBjb25zdCB7IHJlcXVpcmVBcGlLZXkgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL2xpYi9hdXRoJyk7XG4vLyBleHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4vLyAgIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5lbmQoKTtcbi8vICAgaWYgKCFyZXF1aXJlQXBpS2V5KHJlcSwgcmVzKSkgcmV0dXJuO1xuLy8gICBjb25zdCBzcWwgPSBgXG4vLyAgICAgU0VMRUNUIGRhdGVfdHJ1bmMoJ2RheScsIG9jY3VycmVkX2F0KTo6ZGF0ZSBBUyBkYXksIHNpdGUsIHR5cGUsIGNvdW50KCopOjppbnQgYXMgY291bnRcbi8vICAgICBGUk9NIGV2ZW50c1xuLy8gICAgIEdST1VQIEJZIGRheSwgc2l0ZSwgdHlwZVxuLy8gICAgIE9SREVSIEJZIGRheSBERVNDLCBzaXRlXG4vLyAgIGA7XG4vLyAgIHRyeSB7XG4vLyAgICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBwb29sLnF1ZXJ5KHNxbCk7XG4vLyAgICAgY29uc3Qgb3V0ID0ge307XG4vLyAgICAgZm9yIChjb25zdCByIG9mIHJvd3MpIHtcbi8vICAgICAgIGNvbnN0IGQgPSByLmRheS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApO1xuLy8gICAgICAgb3V0W2RdID0gb3V0W2RdIHx8IHt9O1xuLy8gICAgICAgb3V0W2RdW3Iuc2l0ZV0gPSBvdXRbZF1bci5zaXRlXSB8fCB7fTtcbi8vICAgICAgIG91dFtkXVtyLnNpdGVdW3IudHlwZV0gPSByLmNvdW50O1xuLy8gICAgIH1cbi8vICAgICByZXMuanNvbihvdXQpO1xuLy8gICB9IGNhdGNoIChlcnIpIHtcbi8vICAgICBjb25zb2xlLmVycm9yKGVycik7XG4vLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ2RiIGVycm9yJyB9KTtcbi8vICAgfVxuLy8gfVxuXG5jb25zdCB7IHBvb2wgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL2xpYi9kYicpO1xuY29uc3QgeyByZXF1aXJlQXBpS2V5IH0gPSByZXF1aXJlKCcuLi8uLi8uLi9saWIvYXV0aCcpO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5lbmQoKTtcbiAgaWYgKCFyZXF1aXJlQXBpS2V5KHJlcSwgcmVzKSkgcmV0dXJuO1xuXG4gIGNvbnN0IHsgc2l0ZSwgdHlwZSwgZW1haWwsIGNhbXBhaWduX2lkLCBncm91cF9ieSB9ID0gcmVxLnF1ZXJ5O1xuXG4gIC8vIGZpbHRyb3MgZGluw6JtaWNvc1xuICBjb25zdCBmaWx0ZXJzID0gW107XG4gIGNvbnN0IHBhcmFtcyA9IFtdO1xuICBsZXQgaWR4ID0gMTtcblxuICBpZiAoc2l0ZSkge1xuICAgIGZpbHRlcnMucHVzaChgc2l0ZSA9ICQke2lkeCsrfWApO1xuICAgIHBhcmFtcy5wdXNoKHNpdGUpO1xuICB9XG4gIGlmICh0eXBlKSB7XG4gICAgZmlsdGVycy5wdXNoKGB0eXBlID0gJCR7aWR4Kyt9YCk7XG4gICAgcGFyYW1zLnB1c2godHlwZSk7XG4gIH1cbiAgaWYgKGVtYWlsKSB7XG4gICAgZmlsdGVycy5wdXNoKGBlbWFpbCA9ICQke2lkeCsrfWApO1xuICAgIHBhcmFtcy5wdXNoKGVtYWlsKTtcbiAgfVxuICBpZiAoY2FtcGFpZ25faWQpIHtcbiAgICBmaWx0ZXJzLnB1c2goYG1ldGFkYXRhLT4+J2NhbXBhaWduX2lkJyA9ICQke2lkeCsrfWApO1xuICAgIHBhcmFtcy5wdXNoKGNhbXBhaWduX2lkKTtcbiAgfVxuXG4gIC8vIGFncnVwYW1lbnRvIGRpbsOibWljb1xuICBsZXQgZXh0cmFHcm91cCA9ICcnO1xuICBsZXQgZXh0cmFTZWxlY3QgPSAnJztcbiAgaWYgKGdyb3VwX2J5ID09PSAnZW1haWwnKSB7XG4gICAgZXh0cmFTZWxlY3QgPSAnLCBlbWFpbCc7XG4gICAgZXh0cmFHcm91cCA9ICcsIGVtYWlsJztcbiAgfSBlbHNlIGlmIChncm91cF9ieSA9PT0gJ2NhbXBhaWduX2lkJykge1xuICAgIGV4dHJhU2VsZWN0ID0gYCwgbWV0YWRhdGEtPj4nY2FtcGFpZ25faWQnIGFzIGNhbXBhaWduX2lkYDtcbiAgICBleHRyYUdyb3VwID0gYCwgbWV0YWRhdGEtPj4nY2FtcGFpZ25faWQnYDtcbiAgfVxuXG4gIGNvbnN0IHdoZXJlID0gZmlsdGVycy5sZW5ndGggPyBgV0hFUkUgJHtmaWx0ZXJzLmpvaW4oJyBBTkQgJyl9YCA6ICcnO1xuXG4gIGNvbnN0IHNxbCA9IGBcbiAgICBTRUxFQ1QgXG4gICAgICBkYXRlX3RydW5jKCdkYXknLCBvY2N1cnJlZF9hdCk6OmRhdGUgQVMgZGF5LFxuICAgICAgc2l0ZSxcbiAgICAgIHR5cGVcbiAgICAgICR7ZXh0cmFTZWxlY3R9LFxuICAgICAgY291bnQoKik6OmludCBhcyBjb3VudFxuICAgIEZST00gZXZlbnRzXG4gICAgJHt3aGVyZX1cbiAgICBHUk9VUCBCWSBkYXksIHNpdGUsIHR5cGUgJHtleHRyYUdyb3VwfVxuICAgIE9SREVSIEJZIGRheSBERVNDLCBzaXRlXG4gIGA7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHBvb2wucXVlcnkoc3FsLCBwYXJhbXMpO1xuXG4gICAgLy8gRXN0cnV0dXJhIGRlIHNhw61kYVxuICAgIGNvbnN0IG91dCA9IHt9O1xuICAgIGZvciAoY29uc3QgciBvZiByb3dzKSB7XG4gICAgICBjb25zdCBkID0gci5kYXkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgICBvdXRbZF0gPSBvdXRbZF0gfHwge307XG4gICAgICBvdXRbZF1bci5zaXRlXSA9IG91dFtkXVtyLnNpdGVdIHx8IHt9O1xuXG4gICAgICBpZiAoZ3JvdXBfYnkgPT09ICdlbWFpbCcpIHtcbiAgICAgICAgb3V0W2RdW3Iuc2l0ZV1bci5lbWFpbF0gPSBvdXRbZF1bci5zaXRlXVtyLmVtYWlsXSB8fCB7fTtcbiAgICAgICAgb3V0W2RdW3Iuc2l0ZV1bci5lbWFpbF1bci50eXBlXSA9IHIuY291bnQ7XG4gICAgICB9IGVsc2UgaWYgKGdyb3VwX2J5ID09PSAnY2FtcGFpZ25faWQnKSB7XG4gICAgICAgIGNvbnN0IGNpZCA9IHIuY2FtcGFpZ25faWQgfHwgJ3Vua25vd24nO1xuICAgICAgICBvdXRbZF1bci5zaXRlXVtjaWRdID0gb3V0W2RdW3Iuc2l0ZV1bY2lkXSB8fCB7fTtcbiAgICAgICAgb3V0W2RdW3Iuc2l0ZV1bY2lkXVtyLnR5cGVdID0gci5jb3VudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG91dFtkXVtyLnNpdGVdW3IudHlwZV0gPSByLmNvdW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlcy5qc29uKG91dCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnZGIgZXJyb3InIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsicG9vbCIsInJlcXVpcmUiLCJyZXF1aXJlQXBpS2V5IiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImVuZCIsInNpdGUiLCJ0eXBlIiwiZW1haWwiLCJjYW1wYWlnbl9pZCIsImdyb3VwX2J5IiwicXVlcnkiLCJmaWx0ZXJzIiwicGFyYW1zIiwiaWR4IiwicHVzaCIsImV4dHJhR3JvdXAiLCJleHRyYVNlbGVjdCIsIndoZXJlIiwibGVuZ3RoIiwiam9pbiIsInNxbCIsInJvd3MiLCJvdXQiLCJyIiwiZCIsImRheSIsInRvSVNPU3RyaW5nIiwic2xpY2UiLCJjb3VudCIsImNpZCIsImpzb24iLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/stats/daily.js\n");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstats%2Fdaily&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fstats%2Fdaily.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();